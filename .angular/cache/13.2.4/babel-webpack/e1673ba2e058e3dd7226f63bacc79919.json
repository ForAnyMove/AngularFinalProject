{"ast":null,"code":"import { FormControl, FormGroup } from '@angular/forms';\nimport { map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nfunction ProfileComponent_form_2_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Login failed: \", ctx_r2.errorMessage, \" \");\n  }\n}\n\nfunction ProfileComponent_form_2_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1, \" Profile has been updated \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProfileComponent_form_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 3, 4);\n    i0.ɵɵlistener(\"ngSubmit\", function ProfileComponent_form_2_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.onSave();\n    });\n    i0.ɵɵelementStart(2, \"h2\");\n    i0.ɵɵtext(3, \"Profile\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"label\", 5);\n    i0.ɵɵtext(5, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 6);\n    i0.ɵɵelementStart(7, \"label\", 7);\n    i0.ɵɵtext(8, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 8);\n    i0.ɵɵelementStart(10, \"label\", 9);\n    i0.ɵɵtext(11, \"Age\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 10);\n    i0.ɵɵelementStart(13, \"button\", 11);\n    i0.ɵɵtext(14, \"Save\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, ProfileComponent_form_2_div_15_Template, 2, 1, \"div\", 12);\n    i0.ɵɵtemplate(16, ProfileComponent_form_2_div_16_Template, 2, 0, \"div\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r1 = i0.ɵɵreference(1);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.profileForm);\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.profileForm.valid);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r1.submitted && ctx_r0.isProfileFormFail && ctx_r0.isMessage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1.submitted && ctx_r0.isProfileFormSuccess && ctx_r0.isMessage);\n  }\n}\n\nexport let ProfileComponent = /*#__PURE__*/(() => {\n  class ProfileComponent {\n    constructor(userService) {\n      this.userService = userService;\n      this.isProfileFormFail = false;\n      this.isProfileFormSuccess = false;\n      this.isMessage = false;\n      this.errorMessage = '';\n    }\n\n    ngOnInit() {\n      this.userService.getProfile().pipe(map(data => data.user)).subscribe(user => {\n        this.profileForm = new FormGroup({\n          email: new FormControl(user.email),\n          age: new FormControl(user.age),\n          username: new FormControl(user.username)\n        });\n        this.isProfileFormFail = false;\n        this.isProfileFormSuccess = !this.isProfileFormFail;\n      }, err => {\n        this.isProfileFormFail = true;\n        this.isProfileFormSuccess = !this.isProfileFormFail;\n        this.errorMessage = err.error.message;\n      });\n    }\n\n    onSave() {\n      const {\n        username,\n        email,\n        age\n      } = this.profileForm.value;\n      this.userService.updateProfile(username, email, age).subscribe(data => {\n        this.isProfileFormFail = false;\n        this.isProfileFormSuccess = true;\n      }, err => {\n        this.isProfileFormFail = true;\n        this.isProfileFormSuccess = false;\n        this.errorMessage = err.error.message;\n      });\n      this.showMessage();\n    }\n\n    showMessage() {\n      this.isMessage = !this.isMessage;\n      setTimeout(() => {\n        this.isMessage = !this.isMessage;\n      }, 3000);\n    }\n\n  }\n\n  ProfileComponent.ɵfac = function ProfileComponent_Factory(t) {\n    return new (t || ProfileComponent)(i0.ɵɵdirectiveInject(i1.UserService));\n  };\n\n  ProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfileComponent,\n    selectors: [[\"app-profile\"]],\n    decls: 3,\n    vars: 1,\n    consts: [[1, \"profile-container\"], [1, \"profile-wrap\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [\"form\", \"ngForm\"], [\"for\", \"profileForm-password\"], [\"type\", \"text\", \"id\", \"profileForm-username\", \"formControlName\", \"username\", \"placeholder\", \"Username\"], [\"for\", \"profileForm-email\"], [\"type\", \"email\", \"id\", \"profileForm-email\", \"formControlName\", \"email\", \"placeholder\", \"Email\"], [\"for\", \"profileForm-age\"], [\"type\", \"number\", \"id\", \"profileForm-age\", \"formControlName\", \"age\", \"placeholder\", \"Age\"], [\"type\", \"submit\", 3, \"disabled\"], [\"class\", \"error\", 4, \"ngIf\"], [\"class\", \"success\", 4, \"ngIf\"], [1, \"error\"], [1, \"success\"]],\n    template: function ProfileComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtemplate(2, ProfileComponent_form_2_Template, 17, 4, \"form\", 2);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.profileForm);\n      }\n    },\n    directives: [i2.NgIf, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i3.NumberValueAccessor],\n    styles: [\".profile-wrap[_ngcontent-%COMP%]{width:320px;height:auto;background-color:#fff}form[_ngcontent-%COMP%]{margin:60px}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;padding:5px;width:100%;box-sizing:border-box;margin-bottom:20px;border-radius:5px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:10px;color:#fff;background-color:#6c69ff;border:none;border-radius:5px;cursor:pointer}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#8583ff}.error[_ngcontent-%COMP%]{margin-top:20px;font-size:18px;color:red}.success[_ngcontent-%COMP%]{margin-top:20px;font-size:20px;color:#00f}.profile-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}\"]\n  });\n  return ProfileComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}